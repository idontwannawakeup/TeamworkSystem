@page "/project/ticket"
@layout ContainerlessLayout
@inject IDialogService DialogService  

<ProjectLayout>
    <MudContainer MaxWidth="@MaxWidth.Large">
        <MudElement HtmlTag="div" Class="d-flex flex-wrap justify-space-between mb-2">
            <MudText Class="mt-3 mt-md-8 mb-4" Typo="@Typo.h4">TicketName</MudText>
            <MudElement HtmlTag="div" Class="d-flex align-center gap-4">
                <MudButton Variant="@Variant.Outlined"
                           Color="@Color.Info"
                           EndIcon="@Icons.Material.Filled.Edit"
                           Link="/project/ticket/properties">
                    Edit
                </MudButton>
                <MudButton Variant="@Variant.Outlined"
                           Color="@Color.Error"
                           EndIcon="@Icons.Material.Filled.Delete"
                           OnClick="@OnDeleteClickAsync">
                    Delete
                </MudButton>
            </MudElement>
        </MudElement>
        
        <MudGrid Spacing="2">
            <MudItem xs="12" md="7" Class="pb-md-4">
                <MudText Typo="@Typo.h6" Style="@colorGrey">Description</MudText>
                <MudText Typo="@Typo.body1">Nunc mi elit, vehicula ut laoreet ac, aliquam sit amet justo nunc tempor, metus vel placerat suscipit, orci nisl iaculis eros, a tincidunt nisi odio eget lorem nulla condimentum tempor mattis ut vitae feugiat augue cras ut metus a risus iaculis scelerisque eu ac ante.</MudText>
            </MudItem>
            @* Attributes *@
            <MudItem xs="12" md="5" Class="pb-md-4">
                <MudElement HtmlTag="div" Class="d-flex align-center gap-3">
                    <MudIcon Icon="@Icons.Material.Filled.ViewList" Style="@fillGrey" />
                    <MudText Typo="@Typo.h6" Style="@colorGrey">Attributes</MudText>
                </MudElement>
                <MudDivider Class="mt-2 mb-4" />
                <MudElement HtmlTag="div" Class="ticket__attributes d-flex flex-column gap-3 px-3">
                    <MudChipSet Filter="@true" Mandatory="@true">
                        <MudChip Color="@Color.Default" Text="backlog" Default="@true">Backlog</MudChip>
                        <MudChip Color="@Color.Secondary" Text="selected">Selected for development</MudChip>
                        <MudChip Color="@Color.Primary" Text="progress">In progress</MudChip>
                        <MudChip Color="@Color.Success" Text="done">Done</MudChip>
                    </MudChipSet>
                    <MudElement Class="d-flex justify-space-between">
                        <MudText Typo="@Typo.subtitle1">Executor</MudText>
                        <MudElement HtmlTag="div" Class="d-flex align-center gap-2">
                            <MudAvatar Color="@Color.Secondary" Size="@Size.Small">A</MudAvatar>
                            <MudText Typo="@Typo.subtitle2">ExecutorName</MudText>
                        </MudElement>
                    </MudElement>
                    <MudElement Class="d-flex justify-space-between">
                        <MudText Typo="@Typo.subtitle1">Executor</MudText>
                        <MudElement HtmlTag="div" Class="d-flex align-center gap-2">
                            <MudAvatar Color="@Color.Secondary" Size="@Size.Small">A</MudAvatar>
                            <MudText Typo="@Typo.subtitle2">ExecutorName</MudText>
                        </MudElement>
                    </MudElement>
                    <MudElement Class="d-flex justify-space-between">
                        <MudText Typo="@Typo.subtitle1">Executor</MudText>
                        <MudElement HtmlTag="div" Class="d-flex align-center gap-2">
                            <MudAvatar Color="@Color.Secondary" Size="@Size.Small">A</MudAvatar>
                            <MudText Typo="@Typo.subtitle2">ExecutorName</MudText>
                        </MudElement>
                    </MudElement>
                    <MudElement Class="d-flex justify-space-between">
                        <MudText Typo="@Typo.subtitle1">Executor</MudText>
                        <MudElement HtmlTag="div" Class="d-flex align-center gap-2">
                            <MudAvatar Color="@Color.Secondary" Size="@Size.Small">A</MudAvatar>
                            <MudText Typo="@Typo.subtitle2">ExecutorName</MudText>
                        </MudElement>
                    </MudElement>
                </MudElement>
            </MudItem>
        </MudGrid>
    </MudContainer>
</ProjectLayout>

@code {

    private readonly string colorGrey = $"color: {Colors.Grey.Default};";

    private readonly string fillGrey = $"fill: {Colors.Grey.Default};";

    private async Task OnDeleteClickAsync() =>
        await DialogService.ShowMessageBox(
            title: "Confirm deleting",
            message: "Are you sure you want to delete this ticket?",
            cancelText: "Cancel",
            options: new DialogOptions
            {
                FullWidth = true,
                MaxWidth = MaxWidth.Small
            });

}
